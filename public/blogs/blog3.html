<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>PieIsSpy</title>
        <link rel="stylesheet" href="/css/style.css">
        <script src="/js/templateBuilder.js" defer></script>
    </head>

    <body>
        <header></header>

        <div id="main">
            <div id="navigation"></div>

            <div id="content">
                <section>
                    <h2>DOM Manipulation and Website Templating</h2>
                    <h3>12/20/2025</h3>

                    <p>
                        During the earlier days of my website, only the homepage was designed while the rest were seemingly left for dead. 
                        Every page is now designed as of v1.0, but if you look at its html file, there's nothing in some of the parts. 
                        How? This is one of the magic of using JavaScript through DOM manipulation.
                    </p>

                
                    <h3>Table of Content</h3>
                    <ul>
                        <li><a href="#dom">Document Object Model</a></li>
                        <li><a href="#methods">Common DOM Manipulation Methods in JavaScript</a></li>
                        <li><a href="#implementation">Implementation of Templating</a></li>
                    </ul>
                </section>
                
                <section>
                    <h3 id="dom">Document Object Model</h3>
                    <p>
                        Document Object Model (or DOM for short) is a programming interface for documents.
                        Its how the document is represented so programs can change its structure, style and content.
                        It is constructed as a tree of Objects depending on how you placed your elements.
                        Consider the following code block:
                    </p>

<pre class="code"><code>
&lt!DOCTYPE html&gt
&lthtml lang="en"&gt
    &lthead&gt
        &ltmeta charset="UTF-8"&gt
        &ltmeta name="viewport"&gt
        &lttitle&gtDocument&lt/title&gt
    &lt/head&gt

    &ltbody&gt
        &ltheader&gtTitle&lt/header&gt

        &ltdiv id="content"&gt
            &lth2&gtThe word is the bird&lt/h2&gt
            &ltp&gt
                Did you know the word? The word
                that is the bird?
            &lt/p&gt
        &lt/div&gt

        &ltfooter&gt
            &lta href="https://pieisspy.neocities.org/" target="_blank" 
            rel="noopener noreferrer"&gtCool Website!&lt/a&gt
        &lt/footer&gt
    &lt/body&gt
&lt/html&gt

</code></pre>

                    <p>
                        If we were to represent this as a DOM tree, it would look more or less something like this:
                    </p>

                    <img class="img-content" src="/res/blog3/dom1.png">

                    <p>
                        This is a simplified version of a DOM tree. In reality, the elements in this tree would have attributes attached to it, 
                        like this (tree generated by this 
                        <span><a href="https://software.hixie.ch/utilities/js/live-dom-viewer/#" target="_blank" rel="noopener noreferrer">website</a></span>):
                    </p>

                    <img class="img-content" src="/res/blog3/dom2.png">

                    <p>
                        As you can see, the DOM tree also stores the element's attributes and its child text content. 
                        You can also notice that there are a lot of empty text children in it. 
                        DOM also stores the whitespaces of the html file, which is why we fix formatting issues in 
                        HTML through CSS or manually remove the said format in the HTML file itself. 
                        For this blog, this is a topic out of our scope.
                    </p>
                </section>

                <section>
                    <h3 id="methods">Common DOM Manipulation Methods in JavaScript</h3>

                    <p>
                        These are the methods that we will be using for this tutorial:
                    </p>

<pre class="code"><code>
/*
    querySelector() finds the first instance of the stated css selector 
    in the html element it's being called on

    querySelectorAll() finds all instances of the stated css selector 
    in the html element it's being called on
*/
element.querySelector(selector)
element.querySelectorAll(selectors)

/*
    createElement() creates the stated html tag element
*/
document.createElement(tagName)

/*
    appendChild() appends a child into a parent node
*/
parentNode.appendChild(childNode)

/*
    setAttribute() sets the attribute of the element into the given value
*/
element.setAttribute(attribute, value)

/*
    ----Not used, but is nice to know----
    removeChild() removes the child from a parent and returns said child,
    while remove() just straights up deletes it from the DOM
*/
parentNode.removeChild(child)
element.remove()

</code></pre>
                    <p>
                        Of course, since a DOM is an object, it contains more methods and attributes 
                        than just these methods listed here. You can find the full list 
                        <span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" target="_blank" rel="noopener noreferrer">here</a></span>.
                    </p>
                </section>

                <section>
                    <h3 id="implementation">Implementation of Templating</h3>

                    <p>
                        In order to do our implementation (or at least that's how I did it), 
                        its important to already have a template in mind. My suggestion for this is to hard code 
                        the template that you want to use and style it early on, then implement it to the other pages 
                        so that the only thing you have to do is to import both CSS and JS files into your HTML file for 
                        the template to load (for example, template first the home page, then implement it for the rest of the pages).
                    </p>

                    <p>
                        Going back to our code block, we already have a header and a footer that we want to 
                        reuse to the other pages (I'm keeping this simple for the new ones reading here). 
                        Copy the contents of the header and footer into a safe place for reference, then delete those. 
                        You should have something like this:
                    </p>

<pre class="code"><code>
&ltheader&gt&lt/header&gt

...

&ltfooter&gt&lt/footer&gt

</code></pre>

                    <p>
                        Then, we will edit the attributes and text content of the header and footer in the JavaScript file. 
                        Lets start with the header. The only thing we need to do here to replicate the original is to first 
                        query the header from the HTML DOM and set its textContent to "Title".
                    </p>

<pre class="code"><code>
function createHeader() {
    const header = document.querySelector("header");
    header.textContent = Title;
}

</code></pre>

                    <p>
                        If we also want to turn it into a link to the home page (assume our home page to be index.html), 
                        then we'd need to add an anchor <code class="inline-code">&lt;a&gt;</code> 
                        tag to store the text content, then append it into the header.
                    </p>

<pre class="code"><code>
function createHeader() {
    const header = document.querySelector("header");
    const link = document.createElement("a");

    link.textContent = "Title";
    link.setAttribute("href", "index.html");
    header.appendChild(link);
}

</code></pre>

                    <p>
                        We'll be doing the same exact thing for the footer, but this time we want the link to be opened in a 
                        new tab and have the rel set to "noopener noreferrer" (since this is an external site, we're preventing 
                        tabnabbing and https referrer for privacy).
                    </p>

<pre class="code"><code>
function createFooter() {
    const footer = document.querySelector("footer");
    const link = document.createElement("a");

    link.textContent = "Cool Website!";
    link.setAttribute("href", "https://pieisspy.neocities.org/");
    link.setAttribute("target", "_blank");
    link.setAttribute("rel", "noopener noreferrer")
    footer.appendChild(link);
}

</code></pre>

                    <p>
                        And that's it! All you need to do now is to call both of these functions in your main function 
                        in the JS file and link both it and your CSS (assuming you've already styled the template before 
                        as said earlier) files into your <code class="inline-code">&lt;head&gt;</code> and all things should be running.
                    </p>

<pre class="code"><code>
&lthead&gt
    &ltmeta charset="UTF-8"&gt
    &ltmeta name="viewport"&gt
    &lttitle&gtDocument&lt/title&gt
    &ltlink rel="stylesheet" href="style.css"&gt
    &ltscript src="script.js" defer&gt&lt/script&gt
&lt/head&gt

</code></pre>

                    <p>
                        This is just one of the most basic example of DOM Manipulation. If you want to implement a navbar section for all
                         your pages, you can list all your (title page, link) pairs into an array, then for each pair, the script will 
                         create a new anchor <code class="inline-code">&lt;a&gt;</code> tag that has its textContent set to the page, and its href set to the link of the said page 
                         and appends it into the navbar div you've already defined in the HTML file.
                    </p>

                    <p>
                        Of course, this goes without saying, but the script won't work for users who disabled JS, so only the main 
                        content will appear on them. An alternative for this is a static site generator (SSG), which generates an html 
                        based on the content and its given templates. This will be a topic for a future day once I've gone through this.
                    </p>

                </section>

                <section>
                    <h3>References</h3>
                    <ul>
                        <li>https://www.w3.org/TR/WD-DOM/introduction.html</li>
                        <li>https://www.w3schools.com/js/js_htmldom.asp</li>
                        <li>https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model</li>
                        <li>https://www.geeksforgeeks.org/javascript/dom-document-object-model/</li>
                        <li>https://developer.mozilla.org/en-US/docs/Learn_web_development/Core/Scripting/DOM_scripting#doing_some_basic_dom_manipulation</li>
                        <li>https://www.theodinproject.com/lessons/foundations-dom-manipulation-and-events</li>
                    </ul>
                </section>
            </div>
        </div>

        <footer></footer>
    </body>
</html>